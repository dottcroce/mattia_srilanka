<!DOCTYPE html>

<html lang="it">
<head>
<meta charset="utf-8"/>
<title>Udawalawe</title>
<link href="../style.css" rel="stylesheet"/>
<style>
    .top-section {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap;
      margin: 20px auto;
      max-width: 1000px;
      gap: 30px;
    }
    .foto-localita {
      width: 400px;
      height: 250px;
      object-fit: cover;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .descrizione {
      flex: 1;
      background: #fff8dc;
      border: 2px dashed #cba135;
      padding: 20px;
      border-radius: 10px;
      /* Font pi√π leggibile (Arial) e dimensione maggiore per una migliore
         leggibilit√† su tablet e dispositivi mobili */
      font-size: 1.5em;
      font-family: 'Arial', sans-serif;
      line-length: 1.6em;
    }
    .diario-container {
      width: 80%;
      max-width: 700px;
      background: #fff8dc;
      border: 3px double #cba135;
      border-radius: 15px;
      padding: 20px;
      margin: 2em auto;
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
      background-image: repeating-linear-gradient(
        to bottom,
        #fff8dc,
        #fff8dc 29px,
        #e0d8b0 30px
      );
    }
    textarea {
      width: 100%;
      height: 300px;
      font-family: 'Arial', sans-serif;
      font-size: 1.5em;
      background: transparent;
      border: none;
      outline: none;
      resize: none;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-family: 'Arial', sans-serif;
      background-color: #ffcb77;
      border: 2px solid #e07a5f;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.3em;
    }
    .map-section {
      display: flex;
      justify-content: center;
      margin: 1em auto;
    }
    .map-wrapper {
      position: relative;
      width: 350px;
      max-width: 90%;
    }
    .map-wrapper img {
      width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .map-marker {
      position: absolute;
      width: 16px;
      height: 16px;
      background-color: #d62828;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      border: 2px solid #fff;
    }
    .diario-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5em;
      font-size: 1.1em;
    }
    .diario-header .visit-section,
    .diario-header .rating-section {
      display: flex;
      align-items: center;
      gap: 0.3em;
    }
    .diario-header .rating-section .stars {
      font-size: 1.5em;
    }

    /* Stili per le date di permanenza e il simbolo della localit√†.
       Visualizza i giorni di soggiorno a Udawalawe e un'icona di elefante
       per richiamare il parco nazionale e la fauna locale. */
    .info-localita {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin: 10px auto;
      flex-wrap: wrap;
    }
    .date-box {
      background-color: #ffe599;
      color: #d62828;
      padding: 8px 14px;
      border: 2px dashed #d62828;
      border-radius: 10px;
      font-weight: bold;
      font-size: 1.2em;
      font-family: 'Arial', sans-serif;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    }
    .simbolo {
      font-size: 2em;
    }
</style>
</head>
<body style="background-color:#fffde7;">
<!-- Titolo della localit√† -->
<h1 class="titolo-localita">Udawalawe</h1>
  <!-- Sezione che mostra i giorni di permanenza e il simbolo della localit√† -->
  <div class="info-localita">
    <div class="date-box">
      gioved√¨ 7 agosto 2025<br/>
      venerd√¨ 8 agosto 2025
    </div>
    <div class="simbolo">üêò</div>
  </div>
<div class="top-section">
  <img alt="Foto di Udawalawe" class="foto-localita" src="../img/localita/udawalawe.jpg"/>
  <div class="descrizione">Una delle attrazioni pi√π grandi di Udawalawe 
√à l‚ÄôUdawalawe National park che si estende nel sud dello <strong>SRI LANKA</strong>, tra le province di Sabaragamuwa e Uva. Le cose pi√π belle da vedere sono: Elefanti asiatici, Bufali selvatici, scimmie, coccodrilli, cervi e verani<br/><br/><strong>ALBERGO:</strong> WARAKA RESORT</div>
</div>
<div class="map-section">
  <div class="map-wrapper">
    <img src="../img/mappa_fumetto.jpg" alt="Mappa Sri Lanka"/>
    <!-- Marker per Udawalawe: approssimativamente nella zona sud-occidentale -->
    <div class="map-marker" style="top: 70%; left: 40%;"></div>
  </div>
</div>
<div class="diario-container">
  <div class="diario-header">
    <div class="visit-section">
      <span>Visitato</span>
      <input type="checkbox" id="visit-checkbox" />
    </div>
    <div class="rating-section">
      <span>Valutazione</span>
      <div class="stars">
        <span class="star">‚òÖ</span>
        <span class="star">‚òÖ</span>
        <span class="star">‚òÖ</span>
        <span class="star">‚òÖ</span>
        <span class="star">‚òÖ</span>
      </div>
    </div>
  </div>
  <textarea id="diario" placeholder="Scrivi qui i tuoi pensieri..." rows="10"></textarea>
  <div style="text-align:center; margin-top: 1em;">
    <button onclick="salva()">Salva</button>
    <button onclick="tornaHome()">Home</button>
  </div>
</div>

<script>
(function() {
  const diaryKey = 'diario_udawalawe';
  const ratingKey = 'rating_udawalawe';
  const visitKey = 'visit-udawalawe';
  const diario = document.getElementById('diario');
  let lastSavedValue = localStorage.getItem(diaryKey) || '';
  diario.value = lastSavedValue;
  let hasUnsavedChanges = false;
  diario.addEventListener('input', () => {
    hasUnsavedChanges = diario.value !== lastSavedValue;
  });
  window.addEventListener('beforeunload', (e) => {
    if (hasUnsavedChanges) {
      e.preventDefault();
      e.returnValue = '';
    }
  });
  window.salva = function salva() {
    localStorage.setItem(diaryKey, diario.value);
    lastSavedValue = diario.value;
    hasUnsavedChanges = false;
    alert('Pensieri salvati!');
  };
  window.tornaHome = function tornaHome() {
    if (hasUnsavedChanges) {
      if (!confirm('Non hai salvato le modifiche. Vuoi davvero uscire?')) return;
    }
    window.location.href = '../index.html';
  };
  document.addEventListener('DOMContentLoaded', () => {
    const stars = document.querySelectorAll('.stars .star');
    let currentRating = parseInt(localStorage.getItem(ratingKey)) || 0;
    const updateStars = () => {
      stars.forEach((star, idx) => {
        if (idx < currentRating) {
          star.classList.add('selected');
        } else {
          star.classList.remove('selected');
        }
      });
    };
    updateStars();
    stars.forEach((star, idx) => {
      star.addEventListener('click', () => {
        currentRating = idx + 1;
        localStorage.setItem(ratingKey, String(currentRating));
        updateStars();
      });
    });
    const visitCheckbox = document.getElementById('visit-checkbox');
    visitCheckbox.checked = localStorage.getItem(visitKey) === 'true';
    visitCheckbox.addEventListener('change', () => {
      localStorage.setItem(visitKey, visitCheckbox.checked.toString());
    });
  });
})();
</script>
<!-- Effetto sonoro per la pressione dei pulsanti -->
<script>
// Precarichiamo il suono di click una sola volta. Percorso relativo dalla
// directory localita alla cartella audio. Questo permette di riprodurre
// l'effetto ad ogni pressione senza ritardi.
const clickSoundLocal = new Audio('../audio/click.mp3');
function beep() {
  try {
    clickSoundLocal.currentTime = 0;
    clickSoundLocal.play();
  } catch (e) {
    // Il browser potrebbe non supportare l'oggetto Audio
  }
}
document.addEventListener('DOMContentLoaded', () => {
  const buttons = document.querySelectorAll('button');
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      beep();
    });
  });
});
</script>
</body>
</html>
